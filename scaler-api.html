<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/markdown/scaler-api.md at 2025-03-03
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>digilib - The Digital Image Library &#x2013; The digilib Scaler API</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="https://robcast.github.io/digilib/" id="bannerLeft"><h2>digilib - a versatile image viewing environment for the internet</h2>
</a></div>
          <div class="pull-right"><a href="https://robcast.github.io/digilib/" id="bannerRight"><img src="images/digilib-logo-small.png"  alt=""/></a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-03-03<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.12-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="About digilib"><span class="none"></span>About digilib</a></li>
    <li><a href="features.html" title="digilib features"><span class="none"></span>digilib features</a></li>
    <li><a href="digilib-short.html" title="How digilib works"><span class="none"></span>How digilib works</a></li>
    <li><a href="history.html" title="Ancient history"><span class="none"></span>Ancient history</a></li>
   <li class="nav-header">Installation</li>
    <li><a href="build-maven.html" title="Building digilib"><span class="none"></span>Building digilib</a></li>
    <li><a href="install-digilib.html" title="Installing digilib"><span class="none"></span>Installing digilib</a></li>
    <li><a href="server-setup.html" title="Server setup"><span class="none"></span>Server setup</a></li>
    <li><a href="digilib-docker.html" title="digilib in Docker"><span class="none"></span>digilib in Docker</a></li>
   <li class="nav-header">Configuration</li>
    <li><a href="digilib-config.html" title="Configuring digilib"><span class="none"></span>Configuring digilib</a></li>
    <li><a href="image-directories.html" title="Directory layout"><span class="none"></span>Directory layout</a></li>
    <li><a href="java-settings.html" title="Java settings and tuning"><span class="none"></span>Java settings and tuning</a></li>
    <li><a href="auth.html" title="Access control"><span class="none"></span>Access control</a></li>
    <li><a href="pdf-generator.html" title="PDF generation"><span class="none"></span>PDF generation</a></li>
   <li class="nav-header">Development</li>
    <li class="active"><a href="#"><span class="none"></span>The digilib Scaler API</a></li>
    <li><a href="iiif-api.html" title="The digilib IIIF API"><span class="none"></span>The digilib IIIF API</a></li>
    <li><a href="client-integration.html" title="Integrating digilib into your page"><span class="none"></span>Integrating digilib into your page</a></li>
    <li><a href="plugins.html" title="Digilib plugins"><span class="none"></span>Digilib plugins</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="builtBy"><img class="builtBy"  alt="Built by Maven" src="https://maven.apache.org/images/logos/maven-feather.png"    /></a>
<a href="../../" title="Hosted by GitHub" class="builtBy"><img class="builtBy"  alt="Hosted by GitHub" src="https://github.githubassets.com/images/modules/logos_page/GitHub-Logo.png"   width="100px"  /></a>
<a href="http://www.sourceforge.net/" title="Previously hosted by SourceForge" class="builtBy"><img class="builtBy"  alt="Previously hosted by SourceForge" src="https://upload.wikimedia.org/wikipedia/commons/0/0b/Sourceforge_logo.png"   width="100px"  /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>The digilib Scaler API</h1>
<p>The Scaler servlet takes parameters in the HTTP query string format:</p>

<div class="source">
<div class="source"><pre class="prettyprint">http://host.domain/digilib/Scaler/request_path/?param1=value1&amp;param2=value2&amp;... 
</pre></div></div>

<p>Unknown parameters will be silently ignored.</p>
<p>Recognised parameters (as of version 2.9.0, for the most up to date information use the source for <a class="externalLink" href="https://github.com/robcast/digilib/tree/master/common/src/main/java/digilib/conf/DigilibRequest.java">parameters</a> and <a class="externalLink" href="https://github.com/robcast/digilib/tree/master/common/src/main/java/digilib/conf/DigilibOption.java">mode options</a> ):</p>
<dl>

<dt><code>request_path</code></dt>
<dd>(optional, deprecated) path to file or directory.</dd>
<dt><code>fn</code></dt>
<dd>path to file or directory. (This path will be added to <code>request_path</code>. Either parameter can be empty. All paths are relative to the configured base directory from the <a href="digilib-config.html">digilib-config.xml</a> parameter <code>basedir-list</code>).</dd>
<dt><code>pn</code></dt>
<dd>page number. Index into the (alphabetically sorted) directory given by the path. Starts with 1. Ignored if the path points to a file. Default: 1.</dd>
<dt><code>dw</code></dt>
<dd>destination image width (pixels). If omitted the image is scaled to fit <code>dh.</code></dd>
<dt><code>dh</code></dt>
<dd>destination image height (pixels). If omitted the image is scaled to fit <code>dw</code>.</dd>
<dt><code>wx</code></dt>
<dd>relative x offset of the image area to be sent (0 &lt;= <code>wx</code> &lt;= 1). Default: 0.</dd>
<dt><code>wy</code></dt>
<dd>relative y offset of the image area to be sent (0 &lt;= <code>wy</code> &lt;= 1). Default: 0.</dd>
<dt><code>ww</code></dt>
<dd>relative width of the image area to be sent (0 &lt;= <code>ww</code> &lt;= 1). Default: 1.</dd>
<dt><code>wh</code></dt>
<dd>relative height of the image area to be sent (0 &lt;= <code>wh</code> &lt;= 1). Default: 1.</dd>
<dt><code>ws</code></dt>
<dd>additional scaling factor. The resulting image will have the size [<code>ws</code>*<code>dw</code> x <code>ws</code>*<code>dh</code>]. Default: 1.</dd>
<dt><code>cont</code></dt>
<dd>change contrast of the image. Negative values reduce contrast, positive values enhance contrast. Each pixel value is multiplied by 2^<code>cont</code>. Default: 0</dd>
<dt><code>brgt</code></dt>
<dd>change brightness of image. Negative value reduces brightness, positive value enhances brightness. The value <code>brgt</code> is added to each pixel value. Default: 0</dd>
<dt><code>rot</code></dt>
<dd>rotate image. Rotation angle is given in degrees. Default: 0</dd>
<dt><code>rgbm</code></dt>
<dd>modify colour by multiplication. The contrast of the red green and blue components of the image can be reduced or enhanced similar to the <code>cont</code> parameter. The factors for red, green and blue are separated by slashes (e.g. <code>0.86/0/-0.5</code>). Default: <code>0/0/0</code></dd>
<dt><code>rgba</code></dt>
<dd>modify colour by addition. The brightness of the red green and blue components of the image can be reduced or enhanced similar to the <code>brgt</code> parameter. The factors for red, green and blue are separated by slashes (e.g. <code>100/0/25</code>). Default: <code>0/0/0</code></dd>
<dt><code>ddpi</code></dt>
<dd>resolution of client display for <code>osize</code> mode. Either <code>ddpi</code> or <code>ddpix</code> and <code>ddpiy</code> must be set to use <code>osize</code> mode.</dd>
<dt><code>ddpix</code></dt>
<dd>resolution of client display in x direction for <code>osize</code> mode.</dd>
<dt><code>ddpiy</code></dt>
<dd>resolution of client display in y direction for <code>osize</code> mode.</dd>
<dt><code>scale</code></dt>
<dd>absolute scale factor applied to the highest resolution image for <code>ascale</code> mode.</dd>
<dt><code>colop</code></dt>
<dd>color operation. One of
<ul>

<li><code>GRAYSCALE</code> (produces grayscale image)</li>
<li><code>NTSC_GRAY</code> (uses NTSC formula to produce grayscale image)</li>
<li><code>BITONAL</code> (produces black-and-white image)</li>
<li><code>INVERT</code> (inverts colors)</li>
<li><code>MAP_GRAY_BGR</code> (produces false-color image mapping brightness values to color scale from blue via green to red).</li>
</ul>
</dd>
<dt><code>mo</code></dt>
<dd>list of options for the mode of operation separated by comma &#x201c;,&#x201d;.
<dl>

<dt><code>fit</code></dt>
<dd>scale the (selected area of the) image proportionally to fit inside [dw x dh], preserving its aspect ratio (default).</dd>
<dt><code>squeeze</code></dt>
<dd>scale the (selected area of the) image to fill [dw x dh], changing its aspect ratio (since v2.3.3).</dd>
<dt><code>crop</code></dt>
<dd>scale the (selected area of the) image proportionally to fill [dw x dh] with the shorter side, cropping the longer side (since v2.5).</dd>
<dt><code>fill</code></dt>
<dd>scale the (selected area of the) image proportionally to fill [dw x dh] with the longer side, filling out the image on the shorter side if possible (since v2.3.3).</dd>
<dt><code>clip</code></dt>
<dd>send the file in the highest resolution, cropped to fit [<code>dw</code> x <code>dh</code>].</dd>
<dt><code>osize</code></dt>
<dd>scale to original size based on image resolution (from the image metadata) and display resolution (from parameter ddpi). Fails if either resolution is unknown.</dd>
<dt><code>ascale</code></dt>
<dd>scale the highest resolution image by an absolute factor given by the <code>scale</code> parameter.</dd>
<dt><code>file</code></dt>
<dd>send the file as-is (may be very large and all sorts of image types!). If the configuration doesn&#x2019;t allow sending files (<code>sendfile-allowed=false</code>) revert to <code>clip</code>.</dd>
<dt><code>rawfile</code></dt>
<dd>send the file as-is with a mime-type of &#x201c;application/octet-stream&#x201d; so the browser presents a download dialog.</dd>
<dt><code>errtxt</code></dt>
<dd>send error response as plain text.</dd>
<dt><code>errimg</code></dt>
<dd>send error response as image (default).</dd>
<dt><code>errcode</code></dt>
<dd>send error response as HTTP status code.</dd>
<dt><code>q0</code>-<code>q2</code></dt>
<dd>quality of interpolation in scaling (q0: worst, q2 best).</dd>
<dt><code>hires</code></dt>
<dd>only use the highest resolution image.</dd>
<dt><code>autores</code></dt>
<dd>use the pre-scaled image that is bigger than the requested size (default).</dd>
<dt><code>lores</code></dt>
<dd>prefer the next-smaller pre-scaled image.</dd>
<dt><code>vmir</code></dt>
<dd>mirror image vertically.</dd>
<dt><code>hmir</code></dt>
<dd>mirror image horizontally.</dd>
<dt><code>jpg</code></dt>
<dd>the resulting image is always sent as JPEG (otherwise TIFF and PNG images are sent as PNG).</dd>
<dt><code>png</code></dt>
<dd>the resulting image is always sent as PNG (otherwise JPEG and J2K images are sent as JPEG).</dd>
<dt><code>pxarea</code></dt>
<dd>interpret <code>wx</code>, <code>wy</code>, <code>ww</code>, <code>wh</code> as pixel coordinates on the highest resolution image.</dd>
</dl>
</dd>
</dl>
<p>The image to be loaded is specified by the <code>request_path</code> (deprecated) and/or the <code>fn</code> parameter (preferred) and the optional index <code>pn</code>:</p>
<ul>

<li>if <code>fn</code> points to a directory then the file with the index <code>pn</code> (in alphabetical order according to ASCII) will be loaded</li>
<li>if <code>fn</code> points to a file (with or without extension) then this file will be loaded (regardless of <code>pn</code>).</li>
</ul>
<p>Find more information on the directory layout <a href="image-directories.html">here</a>.</p>
<p>The image will always be scaled equally in horizontal and vertical direction, preserving the aspect ratio (except with <code>mo=squeeze</code>), such that the resulting image does not exceed the rectangle [<code>dw</code> x <code>dh</code>].</p>
<p>If only either height or width is given the image is scaled to match only the given dimension. The size of the resulting image in the other dimension is determined by the aspect ratio of the image or the selected area.</p>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2001&#x2013;2025<a href="https://robcast.github.io/digilib/">digilib Community</a>.
.</p>
        </div>
      </div>
    </footer>
  </body>
</html>

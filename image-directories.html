<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/markdown/image-directories.md at 2025-03-03
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>digilib - The Digital Image Library &#x2013; Directory layout for images</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="https://robcast.github.io/digilib/" id="bannerLeft"><h2>digilib - a versatile image viewing environment for the internet</h2>
</a></div>
          <div class="pull-right"><a href="https://robcast.github.io/digilib/" id="bannerRight"><img src="images/digilib-logo-small.png"  alt=""/></a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-03-03<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.12-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="About digilib"><span class="none"></span>About digilib</a></li>
    <li><a href="features.html" title="digilib features"><span class="none"></span>digilib features</a></li>
    <li><a href="digilib-short.html" title="How digilib works"><span class="none"></span>How digilib works</a></li>
    <li><a href="history.html" title="Ancient history"><span class="none"></span>Ancient history</a></li>
   <li class="nav-header">Installation</li>
    <li><a href="build-maven.html" title="Building digilib"><span class="none"></span>Building digilib</a></li>
    <li><a href="install-digilib.html" title="Installing digilib"><span class="none"></span>Installing digilib</a></li>
    <li><a href="server-setup.html" title="Server setup"><span class="none"></span>Server setup</a></li>
    <li><a href="digilib-docker.html" title="digilib in Docker"><span class="none"></span>digilib in Docker</a></li>
   <li class="nav-header">Configuration</li>
    <li><a href="digilib-config.html" title="Configuring digilib"><span class="none"></span>Configuring digilib</a></li>
    <li class="active"><a href="#"><span class="none"></span>Directory layout</a></li>
    <li><a href="java-settings.html" title="Java settings and tuning"><span class="none"></span>Java settings and tuning</a></li>
    <li><a href="auth.html" title="Access control"><span class="none"></span>Access control</a></li>
    <li><a href="pdf-generator.html" title="PDF generation"><span class="none"></span>PDF generation</a></li>
   <li class="nav-header">Development</li>
    <li><a href="scaler-api.html" title="The digilib Scaler API"><span class="none"></span>The digilib Scaler API</a></li>
    <li><a href="iiif-api.html" title="The digilib IIIF API"><span class="none"></span>The digilib IIIF API</a></li>
    <li><a href="client-integration.html" title="Integrating digilib into your page"><span class="none"></span>Integrating digilib into your page</a></li>
    <li><a href="plugins.html" title="Digilib plugins"><span class="none"></span>Digilib plugins</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="builtBy"><img class="builtBy"  alt="Built by Maven" src="https://maven.apache.org/images/logos/maven-feather.png"    /></a>
<a href="../../" title="Hosted by GitHub" class="builtBy"><img class="builtBy"  alt="Hosted by GitHub" src="https://github.githubassets.com/images/modules/logos_page/GitHub-Logo.png"   width="100px"  /></a>
<a href="http://www.sourceforge.net/" title="Previously hosted by SourceForge" class="builtBy"><img class="builtBy"  alt="Previously hosted by SourceForge" src="https://upload.wikimedia.org/wikipedia/commons/0/0b/Sourceforge_logo.png"   width="100px"  /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Directory layout for images</h1>
<p>In digilib all images are identified by the <code>fn</code> and (optional) <code>pn</code> parameters. The value for <code>fn</code> can be a directory path or a directory path and a filename, separated by slashes, e.g. &#x201c;<code>fn=books/book1/page0002</code>&#x201d;.</p>
<p>If <code>fn</code> is a directory path without filename <code>pn</code> is the index number of the image files in this directory in alphabetical order, e.g. &#x201c;<code>fn=books/book1&amp;pn=2</code>&#x201d;. The default for <code>pn</code> is 1 i.e. the first image.</p>
<p>If <code>fn</code> ends in a filename <code>pn</code> is ignored. File extensions are also ignored, i.e. &#x201c;<code>books/book1/page0002</code>&#x201d; and &#x201c;<code>books/book1/page0002.tif</code>&#x201d; identify the same image. It is recommended to omit the file extension.</p>
<p>The directory path in <code>fn</code> is relative to the base directory in the <code>basedir-list</code> parameter of the <code>digilib-config.xml</code> file, e.g. if</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;basedir-list&quot; value=&quot;/docuserver/images&quot; /&gt;
</pre></div></div>

<p>and</p>

<div class="source">
<div class="source"><pre class="prettyprint">fn=books/book1/page0002
</pre></div></div>

<p>then digilib will try to load the file</p>

<div class="source">
<div class="source"><pre class="prettyprint">/docuserver/images/books/book1/page0002.tif
</pre></div></div>

<p>(automatically finding the right file extension)</p><section>
<h2><a name="Prescaled_images"></a>Prescaled images</h2>
<p>You can provide any number of scaled-down versions of your images that digilib can use when a smaller version of an image is requested. Since less data has to be read and processed this can speed up digilib&#x2019;s performance considerably.</p>
<p>The actual process is that the client requests a certain target size, digilib scans all available scaled-down versions of the same image, selects the smallest image that is larger than the requested size and scales it down to the requested size.</p>
<p>There is another optimization in digilib: if the requested image is <i>exactly</i> the same size and type as the pre-scaled image then the pre-scaled image is sent unmodified to the client which is a lot faster. So it makes sense to produce thumbnails of exactly 90 pixel width when they are used in an HTML page where all images are 90 pixel wide.</p>
<p>The scaled-down versions of the image have to have the same file name as the original hi-res file. They can have a different type and extension (e.g. <code>img002.jpg</code> for <code>img002.TIFF</code>)</p>
<p>The scaled down images have to have the same directory path (the part that shows up in digilib&#x2019;s &#x201c;fn&#x201d; parameter) as the hi-res file wile the first part of each directory tree is configured by the <code>basedir-list</code> parameter in <code>digilib-config.xml</code>.</p>
<p>The sequence of directories in <code>basedir-list</code> is from high-res to low-res. Images must be present in the hires directory but they need not be present in all lower-res directories.</p>
<p>e.g. if digilib-config.xml contains</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;basedir-list&quot; value=&quot;/images:/scaled:/thumb&quot; /&gt;
</pre></div></div>

<p>and a user requests the image <code>books/book1/page0002</code> digilib looks for</p>
<ol style="list-style-type: decimal">

<li><code>/thumb/books/book1/page0002.jpg</code></li>
<li><code>/scaled/books/book1/page002.jpg</code></li>
<li><code>/images/books/book1/page002.tif</code></li>
</ol>
<p>(automatically finding the right file extension) and uses the first image that is bigger than or equal to the requested size.</p>
<p>For batch-prescaling our images we use a very old Perl script called &#x201c;scale-o-mat&#x201d; that uses a lot of freely available imaging libraries (ImageMagick, libtiff, netpbm) and is available in our <a class="externalLink" href="https://it-dev.mpiwg-berlin.mpg.de/cvs/cgi-bin/cvsweb/scaleomat/">public CVS</a>. The script is given a hi-res base directory, a destination base directory, a destination size and a starting directory. It then processes all files in the starting directory and all its subdirectories and creates scaled images in corresponding directories under the destination base directory.</p>
<p>We currently use prescaled thumbnails of 100 pixels and images for browser display of 1500 pixels. Remember that the prescaled image has to be larger (or the same size) than the requested image size!</p></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2001&#x2013;2025<a href="https://robcast.github.io/digilib/">digilib Community</a>.
.</p>
        </div>
      </div>
    </footer>
  </body>
</html>

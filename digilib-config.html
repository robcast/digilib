<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/markdown/digilib-config.md at 2025-03-03
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>digilib - The Digital Image Library &#x2013; Configuring digilib</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="https://robcast.github.io/digilib/" id="bannerLeft"><h2>digilib - a versatile image viewing environment for the internet</h2>
</a></div>
          <div class="pull-right"><a href="https://robcast.github.io/digilib/" id="bannerRight"><img src="images/digilib-logo-small.png"  alt=""/></a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-03-03<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.12-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="About digilib"><span class="none"></span>About digilib</a></li>
    <li><a href="features.html" title="digilib features"><span class="none"></span>digilib features</a></li>
    <li><a href="digilib-short.html" title="How digilib works"><span class="none"></span>How digilib works</a></li>
    <li><a href="history.html" title="Ancient history"><span class="none"></span>Ancient history</a></li>
   <li class="nav-header">Installation</li>
    <li><a href="build-maven.html" title="Building digilib"><span class="none"></span>Building digilib</a></li>
    <li><a href="install-digilib.html" title="Installing digilib"><span class="none"></span>Installing digilib</a></li>
    <li><a href="server-setup.html" title="Server setup"><span class="none"></span>Server setup</a></li>
    <li><a href="digilib-docker.html" title="digilib in Docker"><span class="none"></span>digilib in Docker</a></li>
   <li class="nav-header">Configuration</li>
    <li class="active"><a href="#"><span class="none"></span>Configuring digilib</a></li>
    <li><a href="image-directories.html" title="Directory layout"><span class="none"></span>Directory layout</a></li>
    <li><a href="java-settings.html" title="Java settings and tuning"><span class="none"></span>Java settings and tuning</a></li>
    <li><a href="auth.html" title="Access control"><span class="none"></span>Access control</a></li>
    <li><a href="pdf-generator.html" title="PDF generation"><span class="none"></span>PDF generation</a></li>
   <li class="nav-header">Development</li>
    <li><a href="scaler-api.html" title="The digilib Scaler API"><span class="none"></span>The digilib Scaler API</a></li>
    <li><a href="iiif-api.html" title="The digilib IIIF API"><span class="none"></span>The digilib IIIF API</a></li>
    <li><a href="client-integration.html" title="Integrating digilib into your page"><span class="none"></span>Integrating digilib into your page</a></li>
    <li><a href="plugins.html" title="Digilib plugins"><span class="none"></span>Digilib plugins</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="builtBy"><img class="builtBy"  alt="Built by Maven" src="https://maven.apache.org/images/logos/maven-feather.png"    /></a>
<a href="../../" title="Hosted by GitHub" class="builtBy"><img class="builtBy"  alt="Hosted by GitHub" src="https://github.githubassets.com/images/modules/logos_page/GitHub-Logo.png"   width="100px"  /></a>
<a href="http://www.sourceforge.net/" title="Previously hosted by SourceForge" class="builtBy"><img class="builtBy"  alt="Previously hosted by SourceForge" src="https://upload.wikimedia.org/wikipedia/commons/0/0b/Sourceforge_logo.png"   width="100px"  /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Configuring digilib</h1>
<p>The main configuration for <i>digilib</i> is the XML file <code>digilib-config.xml</code> in the <code>WEB-INF</code> directory of the webapp. Alternatively you can also use a Java properties file <code>digilib.properties</code> somewhere in the classpath. (If you really need a different location for the XML file you can define it in the <code>config-file</code> init-parameter to the Servlet. <b>TODO</b> add an example)</p>
<p>In the configuration file you can set lots of paths and options. <i>digilib</i> uses default values for all configuration settings that meet most requirements. Hence you have to configure only the settings that you want to change. The <b><code>basedir-list</code></b> parameter however is <b>mandatory</b> unless you only want to serve the contributed example images for an evaluation.</p>
<p>All options are defined as <code>parameter</code> elements with the attributes <code>name</code> and <code>value</code> that are wrapped in the root element <code>digilib-config</code>. A minimal configuration looks like this:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;digilib-config&gt;
    &lt;parameter name=&quot;basedir-list&quot; value=&quot;/usr/local/images&quot; /&gt;
&lt;/digilib-config&gt;
</pre></div></div>

<p>A more extensive example is included in the sources as <a class="externalLink" href="https://github.com/robcast/digilib/blob/master/webapp/src/main/webapp/WEB-INF/digilib-config.xml.template">digilib-config.xml.template</a>.</p><section>
<h2><a name="Available_parameters"></a>Available parameters</h2>
<p>The documented parameter values below are the defaults.</p>
<p>If relative paths are provided as file locations, these will be resolved with the web application&#x2019;s directory as base.</p>
<p>You can inspect a summary of your running digilib configuration at the URL <code>&lt;base_url&gt;/server/dlConfig.jsp</code> e.g. <a class="externalLink" href="http://localhost:8080/digilib/server/dlConfig.jsp">http://localhost:8080/digilib/server/dlConfig.jsp</a>.</p><section>
<h3><a name="Image_locations"></a>Image locations</h3>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;basedir-list&quot; value=&quot;sample-images&quot; /&gt;
</pre></div></div>

<p>A list of directories where images are searched. See <a href="image-directories.html">this document</a> for details (<b>required</b>).</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;denied-image&quot; value=&quot;img/digilib-denied.png&quot; /&gt;
</pre></div></div>

<p>This image is sent to indicate an authorization failure.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;error-image&quot; value=&quot;img/digilib-error.png&quot; /&gt;
</pre></div></div>

<p>This image is sent to indicate a general failure.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;notfound-image&quot; value=&quot;img/digilib-notfound.png&quot; /&gt;
</pre></div></div>

<p>This image to sent to indicate that the requested image does not exist or could not be read.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;use-mapping&quot; value=&quot;false&quot; /&gt;
</pre></div></div>

<p>Enables the mapping of &#x2018;virtual directories&#x2019; to actual directories in the filesystem using a mapping file.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;mapping-file&quot; value=&quot;digilib-map.xml&quot; /&gt;
</pre></div></div>

<p>The location of the mapping file. Refer to <a class="externalLink" href="https://github.com/robcast/digilib/blob/master/webapp/src/main/webapp/WEB-INF/digilib-map.xml.template">digilib-map.xml.template</a> for an example.</p>
<p>The file contains <code>mapping</code> elements with a <code>link</code> attribute containing a &#x2018;virtual directory&#x2019; name that is redirected to the directory given in the <code>dir</code> attribute.</p></section><section>
<h3><a name="Image_processing_options"></a>Image processing options</h3>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;default-quality&quot; value=&quot;2&quot; /&gt;
</pre></div></div>

<p>The default interpolation quality.</p>
<ul>

<li><code>0</code>: do not use interpolation (worst),</li>
<li><code>1</code>: use linear interpolation,</li>
<li><code>2</code>: use bilinear interpolation and blur-before-scale (best).</li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;max-image-size&quot; value=&quot;0&quot; /&gt;
</pre></div></div>

<p>The maximum size of delivered images as pixel area, <code>40000</code> means up to 200x200 or 100x400, <code>0</code> means no limit.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;sendfile-allowed&quot; value=&quot;true&quot; /&gt;
</pre></div></div>

<p>Defines whether requests with <code>mo=file</code> or <code>mo=rawfile</code> as parameter are allowed to download files (see <a href="scaler-api.html">Scaler API</a>).</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;subsample-minimum&quot; value=&quot;2.0&quot; /&gt;
</pre></div></div>

<p>Specifies the degree of subsampling on image load. This is the minimum factor that is scaled by interpolation and not by subsampling, i.e. by skipping pixels.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;image-reader-classes&quot; value=&quot;image/jpeg=com.sun.imageio.plugins.jpeg.JPEGImageReader&quot;/&gt;
&lt;parameter name=&quot;image-writer-classes&quot; value=&quot;image/jpeg=com.sun.imageio.plugins.jpeg.JPEGImageWriter&quot;/&gt;
</pre></div></div>

<p>Parameters to explicitly specify the Java classes to use as ImageReader and ImageWriter for a given mime-type (separate multiple type-class pairs with comma). Only for special situations. Do not use this unless you have to!</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;input-preselection-allowed&quot; value=&quot;false&quot; /&gt;
</pre></div></div>

<p>Parameter to enable the input preselection mode. This mode currently tries to use browser-usable (JPEG, PNG, GIF) images for full-image unzoomed requests and tiled images for zoom requests. Enable this if you have different types of prescaled images at the same sizes and you want to offer both optimized tiled access and whole-image access.</p></section><section>
<h3><a name="Authentication_and_authorization"></a>Authentication and authorization</h3>
<p>Details are provided in the <a href="auth.html">documentation on authentication and authorization</a>.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;use-authorization&quot; value=&quot;false&quot; /&gt;
</pre></div></div>

<p>Enables or disables all authorization. If <code>use-authorization</code> is <code>true</code> you also have to configure <code>authnops-class</code>, <code>authzops-class</code> and the <code>auth-file</code> and its contents.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;auth-file&quot; value=&quot;digilib-auth.xml&quot; /&gt;
</pre></div></div>

<p>Configuration file for authentication and authorization. The format and content of the configuration file is determined by the chosen authentication and authorization classes.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;authn-token-cookie&quot; value=&quot;id_token&quot; /&gt;
</pre></div></div>

<p>The name of the cookie that holds the authentication token for <code>digilib.auth.OpenIdAuthnOps</code>.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;authnops-class&quot; value=&quot;digilib.auth.IpAuthnOps&quot; /&gt;
</pre></div></div>

<p>The class to handle authentication.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;authzops-class&quot; value=&quot;digilib.auth.PathAuthzOps&quot; /&gt;
</pre></div></div>

<p>The class to handle authorization.</p></section><section>
<h3><a name="IIIF_API_options"></a>IIIF API options</h3>
<p>The options configure the IIIF interface. For more information see the <a href="iiif-api">digilib IIIF documentation</a></p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;iiif-api-version&quot; value=&quot;2.1&quot; /&gt;
</pre></div></div>

<p>The IIIF API version for the generated <code>info.json</code> information response.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;iiif-info-cors&quot; value=&quot;true&quot; /&gt;
</pre></div></div>

<p>Enables the <a class="externalLink" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">Cross-Origin Resource Sharing</a> header in IIIF info requests (<code>Access-Control-Allow-Origin: *</code>).</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;iiif-image-cors&quot; value=&quot;true&quot; /&gt;
</pre></div></div>

<p>Enables the <a class="externalLink" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">Cross-Origin Resource Sharing</a> header in IIIF image requests (<code>Access-Control-Allow-Origin: *</code>).</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;iiif-prefix&quot; value=&quot;IIIF&quot; /&gt;
</pre></div></div>

<p>The prefix (after <code>Scaler</code>) that leads to the IIIF API.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;iiif-slash-replacement&quot; value=&quot;!&quot; /&gt;
</pre></div></div>

<p>The character that replaces a slash in the identifier of IIIF requests.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;iiif-image-base-url&quot; value=&quot;&quot; /&gt;
</pre></div></div>

<p>The base URL used in constructing IIIF information resource URLs (needs to include servlet name and iiif-prefix). This is only necessary in some cases behind a proxy.</p></section><section>
<h3><a name="Threading_options"></a>Threading options</h3>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;max-waiting-threads&quot; value=&quot;20&quot; /&gt;
</pre></div></div>

<p>The maximum number of requests waiting in the queue before new requests get &#x201c;service unavailable&#x201d;.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;worker-threads&quot; value=&quot;2&quot; /&gt;
</pre></div></div>

<p>The maximum number of concurrently working threads.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;worker-timeout&quot; value=&quot;60000&quot; /&gt;
</pre></div></div>

<p>Timeout for worker threads in milliseconds.</p></section><section>
<h3><a name="Storage_backends"></a>Storage backends</h3>
<p>The default configuration of digilib uses the filesystem of the server it runs on to find images (including mounted remote filesystems like NFS or CIFS).</p>
<p>This is implemented in the default DocuDirectory class that uses the <code>basedir-list</code> of image directories:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;docudirectory-class&quot; value=&quot;digilib.io.BaseDirDocuDirectory&quot; /&gt;
</pre></div></div>

<p>But you can also use the new <a class="externalLink" href="https://cdstar.gwdg.de/">CDSTAR</a> storage backend to directly access files stored in a CDSTAR server.</p>
<p>To use the CDSTAR backend you need to build digilib using the <code>storage-cdstar</code> profile in Maven e.g. with <code>-Pstorage-cdstar,servlet3,iiif-presentation</code> and add the following to your digilib configuration:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;docudirectory-class&quot; value=&quot;digilib.io.CdstarArchiveDocuDirectory&quot; /&gt;
&lt;parameter name=&quot;storage-base-url&quot; value=&quot;http://localhost:8080/v3&quot; /&gt;
&lt;parameter name=&quot;storage-auth-username&quot; value=&quot;someuser&quot; /&gt;
&lt;parameter name=&quot;storage-auth-password&quot; value=&quot;somepassword&quot; /&gt;
</pre></div></div>

<p><code>storage-base-url</code> is the base URL of your CDSTAR server. <code>storage-auth-username</code> is the username and <code>storage-auth-pqssword</code> is the password for basic authentication with the CDSTAR server.</p>
<p>digilib tries to read the size of each image from the <code>exif:Image.ImageHeight</code> and <code>exif:Image.ImageWidth</code> keys in the file metadata to reduce the number of HTTP reqests to the CDSTAR server.</p></section><section>
<h3><a name="Other_options"></a>Other options</h3>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;default-errmsg-type&quot; value=&quot;image&quot; /&gt;
</pre></div></div>

<p>Defines how errors are presented to the user. Allowed values are <code>code</code>, <code>image</code> and <code>text</code>.</p>
<ul>

<li><code>image</code> sends an error-image as error code (see <code>denied-image</code>, <code>error-image</code>, <code>notfound-image</code> parameters).</li>
<li><code>code</code> sends an HTTP error code, which may result in a broken image display in the browser.</li>
<li><code>text</code> sends a plain-text error message, which may result in a broken image display in the browser.</li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;img-diskcache-allowed&quot; value=&quot;false&quot; /&gt;
</pre></div></div>

<p>Enables the use of a disk cache for the image toolkit. Using the disk cache may leak file handles and lead to resource issues if digilib runs for a long time.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;log-config-file&quot; value=&quot;log4j-config.xml&quot; /&gt;
</pre></div></div>

<p>Location of the logging configuration file. The current logging library is <a class="externalLink" href="https://logging.apache.org/log4j/1.2/manual.html">Log4J 1.2</a>.</p></section><section>
<h3><a name="Options_for_developers"></a>Options for developers</h3>
<p>Using these options you can replace default classes used by digilib with your own implementations to change the behaviour of digilib.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;docuimage-class&quot; value=&quot;digilib.image.ImageLoaderDocuImage&quot; /&gt;
</pre></div></div>

<p>Class of the <code>DocuImage</code> instance. You can replace the <code>digilib.image.DocuImage</code> implementation to use a different image toolkit than Java ImageIO. (There are deprecated alternative implementations in the <code>common-jai</code>, <code>common-imagej</code> and <code>common-bioformats</code> modules.)</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;docuimage-hacks&quot; value=&quot;&quot; /&gt;
</pre></div></div>

<p>Text string to selectively enable specific <code>Hacks</code> in the <code>DocuImage</code> implementation (see <a class="externalLink" href="https://github.com/robcast/digilib/blob/master/common/src/main/java/digilib/image/ImageLoaderDocuImage.java">the source</a>)</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;filemeta-class&quot; value=&quot;digilib.meta.IndexMetaFileMeta&quot; /&gt;
&lt;parameter name=&quot;dirmeta-class&quot; value=&quot;digilib.meta.IndexMetaDirMeta&quot; /&gt;
</pre></div></div>

<p>Classes of the <code>digilib.meta.FileMeta</code> and <code>digilib.meta.DirMeta</code> implementations. You can change these implementations to change the way digilib finds metadata about image files.</p>
<p><code>IndexMetaFileMeta</code> and <code>IndexMetaDirMeta</code> read metadata from <code>index.meta</code> and <code>*.meta</code> XML files according to the <a class="externalLink" href="http://intern.mpiwg-berlin.mpg.de/digitalhumanities/mpiwg-metadata-documentation/formate/indexmeta-standard">index meta standard</a>.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;parameter name=&quot;docudirectory-class&quot; value=&quot;digilib.io.BaseDirDocuDirectory&quot; /&gt;
</pre></div></div>

<p>Class of the <code>digilib.io.DocuDirectory</code> implementation. You can change this implementation to change the way digilib finds image files (including different resolutions).</p></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2001&#x2013;2025<a href="https://robcast.github.io/digilib/">digilib Community</a>.
.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
